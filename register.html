<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MzanziGrid ZA - Register</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="theme-switcher">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
            <span class="theme-icon">üåô</span>
            <span class="theme-text">Dark</span>
        </button>
        <div class="theme-options">
            <button class="theme-option" data-theme="dark">Dark</button>
            <button class="theme-option" data-theme="light">Light</button>
            <button class="theme-option" data-theme="system">System</button>
        </div>
    </div>

    <div class="login-container">
        <div class="login-header">
            <h1>MzanziGrid ZA</h1>
            <p>Join our community-driven electricity disruption tracking</p>
        </div>
        
        <div class="login-card">
            <h2>Create Your Account</h2>
            <p class="subtitle">Choose your account type to continue</p>
            
            <div class="account-type-selector">
                <div class="account-option active" data-type="resident">
                    <div class="icon">üè†</div>
                    <h3>City Resident</h3>
                    <p>Report and track outages in your area</p>
                </div>
                <div class="account-option" data-type="worker">
                    <div class="icon">üë∑</div>
                    <h3>Municipality Worker</h3>
                    <p>Access verified updates and reports</p>
                </div>
            </div>
            
            <!-- Resident Registration Form -->
            <form id="resident-form" class="registration-form active">
                <div class="form-row">
                    <div class="form-group">
                        <label for="resident-firstname">First Name *</label>
                        <input type="text" id="resident-firstname" name="firstname" required>
                    </div>
                    <div class="form-group">
                        <label for="resident-surname">Surname *</label>
                        <input type="text" id="resident-surname" name="surname" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="resident-email">Email Address *</label>
                    <input type="email" id="resident-email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="resident-phone">Phone Number *</label>
                    <input type="tel" id="resident-phone" name="phone" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="resident-city">City/Town *</label>
                        <input type="text" id="resident-city" name="city" required>
                    </div>
                    <div class="form-group">
                        <label for="resident-province">Province *</label>
                        <select id="resident-province" name="province" required>
                            <option value="">Select Province</option>
                            <option value="EC">Eastern Cape</option>
                            <option value="FS">Free State</option>
                            <option value="GP">Gauteng</option>
                            <option value="KZN">KwaZulu-Natal</option>
                            <option value="LP">Limpopo</option>
                            <option value="MP">Mpumalanga</option>
                            <option value="NW">North West</option>
                            <option value="NC">Northern Cape</option>
                            <option value="WC">Western Cape</option>
                        </select>
                    </div>
                </div>
                
                <div class="location-preview" id="location-preview" style="display: none;">
                    <div class="location-info">
                        <span class="location-icon">üìç</span>
                        <span id="location-text"></span>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="resident-password">Password *</label>
                        <input type="password" id="resident-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="resident-confirm-password">Confirm Password *</label>
                        <input type="password" id="resident-confirm-password" name="confirm_password" required>
                    </div>
                </div>
                
                <div class="form-options">
                    <div class="terms-agreement">
                        <input type="checkbox" id="resident-terms" required>
                        <label for="resident-terms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                    </div>
                </div>
                
                <button type="submit" class="login-btn">Create Resident Account</button>
            </form>
            
            <!-- Municipality Worker Registration Form -->
            <form id="worker-form" class="registration-form">
                <div class="form-group">
                    <label for="worker-company">Municipality/Company Name *</label>
                    <input type="text" id="worker-company" name="company" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="worker-firstname">First Name *</label>
                        <input type="text" id="worker-firstname" name="firstname" required>
                    </div>
                    <div class="form-group">
                        <label for="worker-surname">Surname *</label>
                        <input type="text" id="worker-surname" name="surname" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="worker-email">Work Email Address *</label>
                    <input type="email" id="worker-email" name="email" placeholder="name@municipality.gov.za" required>
                </div>
                
                <div class="form-group">
                    <label for="worker-phone">Phone Number *</label>
                    <input type="tel" id="worker-phone" name="phone" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="worker-password">Password *</label>
                        <input type="password" id="worker-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="worker-confirm-password">Confirm Password *</label>
                        <input type="password" id="worker-confirm-password" name="confirm_password" required>
                    </div>
                </div>
                
                <div class="worker-notice">
                    <div class="notice-icon">‚ö†Ô∏è</div>
                    <div class="notice-text">
                        <strong>Verification Required:</strong> Your account will be reviewed by our admin team. 
                        You'll receive an email once your identity has been verified and your account is activated.
                        This process may take 24-48 hours.
                    </div>
                </div>
                
                <div class="form-options">
                    <div class="terms-agreement">
                        <input type="checkbox" id="worker-terms" required>
                        <label for="worker-terms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                    </div>
                </div>
                
                <button type="submit" class="login-btn">Register as Municipality Worker</button>
            </form>
            
            <div class="register-link">
                <p>Already have an account? <a href="index.html">Sign In</a></p>
            </div>
        </div>
        
        <div class="platform-info">
            <h3>About MzanziGrid ZA</h3>
            <p>We track and report unplanned electricity disruptions across South Africa, focusing on cable theft, transformer explosions, and infrastructure sabotage.</p>
            <ul>
                <li>Report local incidents with evidence</li>
                <li>Access verified updates from municipalities</li>
                <li>View outage maps and regional trends</li>
                <li>Receive alerts and safety information</li>
            </ul>
        </div>
    </div>

    <script>
        // Theme switching functionality (same as login page)
        const themeToggle = document.getElementById('theme-toggle');
        const themeOptions = document.querySelectorAll('.theme-option');
        const themeIcon = document.querySelector('.theme-icon');
        const themeText = document.querySelector('.theme-text');

        function setInitialTheme() {
            const savedTheme = localStorage.getItem('mzanzigrid-theme') || 'system';
            applyTheme(savedTheme);
            updateToggleButton(savedTheme);
        }

        function applyTheme(theme) {
            let effectiveTheme = theme;
            
            if (theme === 'system') {
                effectiveTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }
            
            document.body.setAttribute('data-theme', effectiveTheme);
            document.documentElement.setAttribute('data-theme', effectiveTheme);
            localStorage.setItem('mzanzigrid-theme', theme);
            
            themeOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.theme === theme);
            });
        }

        function updateToggleButton(theme) {
            if (theme === 'dark') {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark';
            } else if (theme === 'light') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light';
            } else {
                themeIcon.textContent = 'üíª';
                themeText.textContent = 'System';
            }
        }

        themeToggle.addEventListener('click', () => {
            document.querySelector('.theme-options').classList.toggle('show');
        });

        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                const selectedTheme = option.dataset.theme;
                applyTheme(selectedTheme);
                updateToggleButton(selectedTheme);
                document.querySelector('.theme-options').classList.remove('show');
            });
        });

        document.addEventListener('click', (e) => {
            if (!themeToggle.contains(e.target) && !document.querySelector('.theme-options').contains(e.target)) {
                document.querySelector('.theme-options').classList.remove('show');
            }
        });

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            const savedTheme = localStorage.getItem('mzanzigrid-theme') || 'system';
            if (savedTheme === 'system') {
                applyTheme('system');
            }
        });

        // Account type selection
        document.querySelectorAll('.account-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.account-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                
                const accountType = this.dataset.type;
                document.querySelectorAll('.registration-form').forEach(form => {
                    form.classList.remove('active');
                });
                document.getElementById(`${accountType}-form`).classList.add('active');
            });
        });

        // Location detection for resident form
        const cityInput = document.getElementById('resident-city');
        const provinceSelect = document.getElementById('resident-province');
        const locationPreview = document.getElementById('location-preview');
        const locationText = document.getElementById('location-text');

        function updateLocationPreview() {
            const city = cityInput.value.trim();
            const province = provinceSelect.value;
            
            if (city && province) {
                const provinceNames = {
                    'EC': 'Eastern Cape',
                    'FS': 'Free State', 
                    'GP': 'Gauteng',
                    'KZN': 'KwaZulu-Natal',
                    'LP': 'Limpopo',
                    'MP': 'Mpumalanga',
                    'NW': 'North West',
                    'NC': 'Northern Cape',
                    'WC': 'Western Cape'
                };
                
                locationText.textContent = `${city}, ${provinceNames[province]}`;
                locationPreview.style.display = 'block';
            } else {
                locationPreview.style.display = 'none';
            }
        }

        cityInput.addEventListener('input', updateLocationPreview);
        provinceSelect.addEventListener('change', updateLocationPreview);

        // Form validation and submission
        document.getElementById('resident-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const password = document.getElementById('resident-password').value;
            const confirmPassword = document.getElementById('resident-confirm-password').value;
            
            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            // In a real app, you would send this data to your backend
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            console.log('Resident Registration:', data);
            alert('Resident account registration submitted! You can now log in.');
            window.location.href = 'index.html';
        });

        document.getElementById('worker-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const password = document.getElementById('worker-password').value;
            const confirmPassword = document.getElementById('worker-confirm-password').value;
            
            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            // In a real app, you would send this data to your backend
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            console.log('Worker Registration:', data);
            alert('Municipality worker registration submitted! Your account will be reviewed by our admin team. You\'ll receive an email once verified.');
            window.location.href = 'index.html';
        });

        // Password strength indicator (optional enhancement)
        function checkPasswordStrength(password) {
            // Simple password strength check
            let strength = 0;
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            return strength;
        }

        // Initialize
        setInitialTheme();
    </script>
</body>
</html>